{% extends "layout.html" %}
{% block layout %}
  <div id="container" class="column">
    <div id="card-header" class="row apart-children">
      <div id="select-vehicle-tab" class="card-header-tab column active-tab">
        <span>Step 1: Vehicle details & file</span>
        <span>Select the vehicle and upload the file</span>
      </div>
      <div id="select-options-tab" class="card-header-tab column">
        <span>Step 2: Select the options</span>
        <span>Select processing options and drop a description below</span>
      </div>
    </div>
    <div class="p-4 rounded-b-xl bg-white">
      {% if messages %}
        {% for message in messages %}<p>{{ message }}</p>{% endfor %}
      {% endif %}
      <form id="file-request-form"
            method="post"
            enctype="multipart/form-data"
            action="{% url 'Upload' %}">
        {% csrf_token %}
        <div id="select-vehicle-card" class="flex flex-col">
          <div class="flex flex-row justify-around">
            <div class="flex flex-col w-2/5">
              <div>Upload file</div>
              <div class="flex items-center justify-center w-full">
                <label for="dropzone-file"
                       class="flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-bray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-600">
                  <div class="flex flex-col items-center justify-center pt-5 pb-6">
                    <svg class="w-8 h-8 mb-4 text-gray-500 dark:text-gray-400"
                         aria-hidden="true"
                         xmlns="http://www.w3.org/2000/svg"
                         fill="none"
                         viewBox="0 0 20 16">
                      <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2" />
                    </svg>
                    <p class="mb-2 text-sm text-gray-500 dark:text-gray-400">
                      <span class="font-semibold">Click to upload</span> or drag and drop
                    </p>
                    <p class="text-xs text-gray-500 dark:text-gray-400">MAX. 20MB</p>
                  </div>
                  <input id="dropzone-file"
                         type="file"
                         class="hidden"
                         name="original_file"
                         data-max-file-size="20M"
                         data-allowed-file-extensions="bin fpf dec unq cod mpc fls ori org mod zip rar tun pak slave dat dtf file fpf mmf bdc moc txt bak bdc sbdc" />
                </label>
              </div>
              <select id="file-type-select" name="file_type">
                <option value="null" disabled selected hidden>Choose a file type</option>
                <option value="E">ECU File</option>
                <option value="T">Transmission File</option>
              </select>
            </div>
            <div id="vehicle-select-section" class="flex flex-col w-2/4">
              <div>Select Vehicle</div>
              <select id="vehicle-category-select-1" name="vehicle_category">
                <option value="null" disabled selected hidden>Choose a vehicle category</option>
                {% for category in vehicle_category_list %}<option value="{{ category.id }}">{{ category.name }}</option>{% endfor %}
              </select>
              <select id="vehicle-brand-select-2" disabled name="vehicle_brand">
                <option value="null" disabled selected hidden>Choose a vehicle brand</option>
              </select>
              <select id="vehicle-model-select-3" disabled name="vehicle_model">
                <option value="null" disabled selected hidden>Choose a vehicle model</option>
              </select>
              <select id="vehicle-year-select-4" disabled name="vehicle_year">
                <option value="null" disabled selected hidden>Choose a vehicle year</option>
              </select>
              <select id="vehicle-version-select-5" disabled name="vehicle_version">
                <option value="null" disabled selected hidden>Choose a vehicle version</option>
              </select>
              <select id="ecu-type-select-6" disabled name="ecu_type">
                <option value="null" disabled selected hidden>Choose an ecu type</option>
              </select>
              <select id="transmission-type-select" name="transmission_type">
                <option value="null" disabled selected hidden>Choose a transmission type</option>
                <option value="A">Auto</option>
                <option value="M">Manual</option>
              </select>
              <select id="tool-select" name="tool">
                <option value="null" disabled selected hidden>Choose a connection tool</option>
                {% for tool in connection_tool_list %}<option value="{{ tool.id }}">{{ tool }}</option>{% endfor %}
              </select>
            </div>
          </div>
          <input id="continue-button" type="button" value="Continue" />
          <div id="proceeding-error">Please fill all areas of the form before proceeding!</div>
        </div>
        <div id="select-options-card" class="row pasive-card">
          <div id="price-options-form"></div>
          <div id="calculator-box" class="column">
            <div id="calculator-header">Price</div>
            <div id="calculator-body">
              <div id="choice-content">
                <ul id="selected-services">
                  <li id="tax-li" class="price-li">
                    <div class="row apart-children">
                      <div>
                        Taxes
                        <span id="tax-percentage-span">{{ tax_percentage }}</span>%
                      </div>
                      <div>
                        <span id="tax-amount-span">5</span>$
                      </div>
                    </div>
                  </li>
                </ul>
                <div id="price-total" class="row apart-children">
                  <span>Total:</span>
                  <div>
                    <span id="total-amount-span">0</span>$
                  </div>
                </div>
              </div>
              <div id="no-choice-content">Please select some options</div>
            </div>
          </div>
          <textarea name="customer_description"
                    maxlength="400"
                    placeholder="Please provide more information about your request and explain further..."
                    required></textarea>
          <input type="submit" />
        </div>
      </form>
    </div>
  </div>
{% endblock layout %}
